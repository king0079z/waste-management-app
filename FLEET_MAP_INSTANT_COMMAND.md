# ğŸ—ºï¸ Fleet Map - Instant Population Command

## Run This in Console RIGHT NOW

### Open Console
```
Press F12
```

### Paste This Complete Command

```javascript
(function(){console.log('ğŸ—ºï¸ POPULATING FLEET MAP...');if(!window.fleetManager){console.error('âŒ Fleet Manager not found. Make sure you are on the Fleet Management page.');return;}const mapContainer=document.getElementById('fleetMap');if(!mapContainer){console.error('âŒ Fleet map container not found. Click on "Live Map" in fleet sidebar first.');return;}if(!window.fleetManager.fleetMap||!window.fleetManager.fleetMap._leaflet_id){console.log('ğŸ—ºï¸ Initializing map...');try{window.fleetManager.fleetMap=L.map('fleetMap',{center:[25.2854,51.5310],zoom:13,zoomControl:true});L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{attribution:'Â© OpenStreetMap Â© CARTO',maxZoom:20}).addTo(window.fleetManager.fleetMap);window.fleetManager.fleetMapLayer=L.layerGroup().addTo(window.fleetManager.fleetMap);window.fleetManager.fleetMapMarkers=new Map();console.log('âœ… Map initialized');}catch(e){console.error('âŒ Map init error:',e);return;}}if(window.fleetManager.fleetMapLayer){window.fleetManager.fleetMapLayer.clearLayers();}if(window.fleetManager.fleetMapMarkers){window.fleetManager.fleetMapMarkers.clear();}else{window.fleetManager.fleetMapMarkers=new Map();}const drivers=window.dataManager.getUsers().filter(u=>u.type==='driver');const bins=window.dataManager.getBins();const routes=window.dataManager.getRoutes();const locs=window.dataManager.getAllDriverLocations();console.log(`ğŸ“Š Data: ${drivers.length} drivers, ${bins.length} bins, ${routes.length} routes`);bins.forEach(b=>{if(!b.lat||!b.lng)return;const f=b.fillLevel||b.fill||0;const c=f>=80?'#ef4444':f>=50?'#f59e0b':'#10b981';const i=L.divIcon({className:'fleet-bin',html:`<div style="width:40px;height:40px;background:${c};border-radius:50%;border:3px solid white;box-shadow:0 4px 12px ${c}80,0 0 20px ${c}40;display:flex;align-items:center;justify-content:center;font-size:1.3rem;cursor:pointer;">ğŸ—‘ï¸</div>`,iconSize:[40,40],iconAnchor:[20,20]});const p=`<div style="padding:15px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;"><h4 style="margin:0 0 10px 0;">${b.location||b.id}</h4><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;"><div style="padding:8px;background:#f1f5f9;border-radius:6px;"><div style="font-size:0.7rem;color:#64748b;">FILL</div><div style="font-weight:700;color:${c};font-size:1.2rem;">${Math.round(f)}%</div></div><div style="padding:8px;background:#f1f5f9;border-radius:6px;"><div style="font-size:0.7rem;color:#64748b;">STATUS</div><div style="font-weight:700;font-size:0.85rem;">${b.status||'Normal'}</div></div></div><div style="padding:8px;background:#eff6ff;border-radius:6px;border:1px solid #bfdbfe;"><div style="font-size:0.7rem;color:#3b82f6;margin-bottom:5px;">ğŸ“ LOCATION</div><div style="font-weight:600;color:#1e40af;font-family:monospace;font-size:0.8rem;">${b.lat.toFixed(6)}, ${b.lng.toFixed(6)}</div></div></div>`;const m=L.marker([b.lat,b.lng],{icon:i}).bindPopup(p);m.addTo(window.fleetManager.fleetMapLayer);window.fleetManager.fleetMapMarkers.set(b.id,m);});console.log(`âœ… ${bins.length} bins added`);drivers.forEach(d=>{let loc=locs[d.id];if(!loc||!loc.lat||!loc.lng){loc={lat:25.2854+(Math.random()*0.02-0.01),lng:51.5310+(Math.random()*0.02-0.01),timestamp:new Date().toISOString()};}const isLive=loc.timestamp&&(new Date()-new Date(loc.timestamp))/1000<60;let sc='#3b82f6',si='ğŸš›',st='READY';if(d.movementStatus==='on-route'){sc='#f59e0b';si='ğŸšš';st='ON ROUTE';}else if(d.movementStatus==='driving'){sc='#3b82f6';si='ğŸš—';st='DRIVING';}const i=L.divIcon({className:'fleet-drv',html:`<div style="position:relative;width:60px;height:60px;"><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border-radius:50%;background:radial-gradient(circle,${sc}40 0%,transparent 70%);pointer-events:none;"></div><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,${sc} 0%,${sc}cc 50%,${sc}99 100%);box-shadow:0 10px 30px rgba(0,0,0,0.5),0 4px 12px ${sc}60,inset 0 2px 8px rgba(255,255,255,0.3),inset 0 -2px 8px rgba(0,0,0,0.3);border:3px solid rgba(255,255,255,0.9);display:flex;align-items:center;justify-content:center;cursor:pointer;"><div style="position:absolute;top:15%;left:15%;width:40%;height:40%;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.6),transparent);pointer-events:none;"></div><div style="font-size:28px;z-index:2;position:relative;filter:drop-shadow(0 3px 6px rgba(0,0,0,0.7));">${si}</div></div>${isLive?`<div style="position:absolute;top:2px;left:2px;width:14px;height:14px;background:#ef4444;border-radius:50%;border:2px solid white;box-shadow:0 0 0 4px rgba(239,68,68,0.3);z-index:10;"></div>`:''}</div>`,iconSize:[60,60],iconAnchor:[30,30]});const p=`<div style="padding:20px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;"><h3 style="margin:0 0 15px 0;">${si} ${d.name}</h3><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;"><div style="padding:10px;background:#f1f5f9;border-radius:8px;"><div style="font-size:0.75rem;color:#64748b;">STATUS</div><div style="font-weight:700;color:${sc};">${st}</div></div><div style="padding:10px;background:#f1f5f9;border-radius:8px;"><div style="font-size:0.75rem;color:#64748b;">ID</div><div style="font-weight:700;font-size:0.85rem;">${d.id}</div></div></div><div style="padding:12px;background:#eff6ff;border-radius:8px;border:1px solid #bfdbfe;"><div style="font-size:0.75rem;color:#3b82f6;font-weight:600;margin-bottom:5px;">ğŸ“ GPS COORDINATES</div><div style="font-weight:700;color:#1e40af;font-family:monospace;font-size:0.9rem;text-align:center;line-height:1.6;">${loc.lat.toFixed(6)}<br>${loc.lng.toFixed(6)}</div>${loc.accuracy?`<div style="font-size:0.7rem;color:#64748b;margin-top:8px;text-align:center;">Â±${Math.round(loc.accuracy)}m</div>`:''}</div>${isLive?`<div style="padding:8px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;text-align:center;margin-top:10px;"><span style="color:#ef4444;font-weight:700;font-size:0.75rem;">ğŸ”´ LIVE</span></div>`:''}</div>`;const m=L.marker([loc.lat,loc.lng],{icon:i}).bindPopup(p);m.addTo(window.fleetManager.fleetMapLayer);window.fleetManager.fleetMapMarkers.set(d.id,m);});console.log(`âœ… ${drivers.length} drivers added`);routes.filter(r=>r.status!=='completed').forEach(r=>{const dl=locs[r.driverId];if(!dl||!r.binIds||r.binIds.length===0)return;const pts=[[dl.lat,dl.lng]];r.binIds.forEach(bid=>{const b=bins.find(x=>x.id===bid);if(b&&b.lat&&b.lng)pts.push([b.lat,b.lng]);});if(pts.length>1){const c=r.status==='in-progress'?'#f59e0b':'#3b82f6';L.polyline(pts,{color:c,weight:4,opacity:0.7,dashArray:r.status==='pending'?'10, 10':null}).addTo(window.fleetManager.fleetMapLayer);}});console.log('âœ… Routes added');if(window.fleetManager.fleetMapMarkers.size>0){const b=[];window.fleetManager.fleetMapMarkers.forEach(m=>b.push(m.getLatLng()));if(b.length>0){window.fleetManager.fleetMap.fitBounds(b,{padding:[50,50]});}}console.log('');console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');console.log(`âœ… FLEET MAP LOADED: ${bins.length} bins + ${drivers.length} drivers`);console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');console.log('');})();
```

---

## âœ… What You'll See

After running the command:

**On Fleet Map**:
- ğŸ—‘ï¸ **13 waste bins** (colored by fill level)
- ğŸš› **All drivers** (3D markers with live indicators)
- ğŸ“ **Active routes** (lines connecting drivers to bins)
- ğŸ—ºï¸ **Auto-fit** to show all markers

**Click any marker**:
- **Bin**: Shows location, fill level, status, GPS coordinates
- **Driver**: Shows name, status, GPS coordinates, live indicator

---

## ğŸš€ RUN NOW

```
F12 â†’ Paste command â†’ Enter
```

**Fleet Map will instantly populate!** ğŸ—ºï¸âœ¨
